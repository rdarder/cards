<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>The First Clash! ⚔️</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<h1 data-number="8" id="the-first-clash"><span
class="header-section-number">8</span> The First Clash! ⚔️</h1>
<hr />
<h2 data-number="8.1" id="the-story-so-far-5"><span
class="header-section-number">8.1</span> The Story So Far…</h2>
<p>You are a true creator! You’ve built a Card Forge that can generate
endless unique creatures and functions that can analyze them in an
instant. All the pieces are on the workshop table. Now, it’s time to put
them together and spark them to life. It’s time to make two creatures
meet on the battlefield.</p>
<h2 data-number="8.2"
id="the-mission-what-well-accomplish-today-6"><span
class="header-section-number">8.2</span> The Mission: What We’ll
Accomplish Today</h2>
<p>Today, we will create the first interactive moment of your game. We
will write a script that sets up a small skirmish, determines who
attacks first, and allows a single, dramatic attack to take place, with
the player making the choice if it’s their turn.</p>
<h2 data-number="8.3" id="the-spellbook-new-tools-well-learn-6"><span
class="header-section-number">8.3</span> The Spellbook: New Tools We’ll
Learn</h2>
<p><strong>1. Booleans: <code>true</code> and <code>false</code> (The
Light Switch)</strong></p>
<p>So far, we’ve used two types of data: <code>numbers</code> (like 10)
and <code>strings</code> (like “Hello”). It’s time to learn the third
major type: the <strong>boolean</strong>.</p>
<p>A boolean is super simple. It can only ever have one of two values:
<strong><code>true</code></strong> or
<strong><code>false</code></strong>. That’s it.</p>
<p><strong>Analogy:</strong> Think of a light switch. It can only be on
or off. Booleans are perfect for tracking simple states or the answers
to yes/no questions. Is the game over? <code>false</code>. Is the player
hidden? <code>true</code>.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">is_game_over</span> <span class="op">=</span> <span class="kw">false</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">player_has_key</span> <span class="op">=</span> <span class="kw">true</span></span></code></pre></div>
<p><strong>2. Conditionals: <code>if/then/else</code> (Making
Decisions)</strong></p>
<p>An <strong><code>if</code> statement</strong> is how you use booleans
to make your program smart. It checks if a condition is
<code>true</code>, and if it is, it runs a block of code.</p>
<p>The “condition” part of an <code>if</code> statement always results
in a boolean. For example, <code>player_level &gt; 10</code> becomes
<code>true</code> if <code>player_level</code> is 12.</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- We can use a boolean variable directly</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">player_has_key</span> <span class="op">==</span> <span class="kw">true</span> <span class="cf">then</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span><span class="op">(</span><span class="st">&quot;You unlock the door.&quot;</span><span class="op">)</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span><span class="op">(</span><span class="st">&quot;The door is locked.&quot;</span><span class="op">)</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code></pre></div>
<p><strong>3. User Input: <code>io.read()</code> (Listening to the
Player)</strong></p>
<p>This function makes your program pause and wait for the player to
type something and press Enter.</p>
<p><strong>Important:</strong> <code>io.read()</code> always gives you
back a <code>string</code>. If you need a number, you have to convert it
using <code>tonumber()</code>.</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span><span class="op">(</span><span class="st">&quot;Choose a spell (1=Fireball, 2=Ice Lance):&quot;</span><span class="op">)</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">choice_text</span> <span class="op">=</span> <span class="fu">io.read</span><span class="op">()</span> <span class="co">-- Player types &quot;1&quot;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">choice_number</span> <span class="op">=</span> <span class="fu">tonumber</span><span class="op">(</span><span class="va">choice_text</span><span class="op">)</span> <span class="co">-- Convert the &quot;1&quot; string to the number 1</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">choice_number</span> <span class="op">==</span> <span class="dv">1</span> <span class="cf">then</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span><span class="op">(</span><span class="st">&quot;You cast Fireball!&quot;</span><span class="op">)</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code></pre></div>
<h2 data-number="8.4" id="your-quest-the-first-clash"><span
class="header-section-number">8.4</span> Your Quest: The First
Clash!</h2>
<p>We’ll build this in a single script (<code>main.lua</code>)
step-by-step.</p>
<p><strong>Step 1: Setting the Stage</strong></p>
<ol type="1">
<li>Make sure your <code>generate_random_card()</code> and other
functions are ready.</li>
<li>Create two empty tables: <code>player_hand</code> and
<code>computer_hand</code>.</li>
<li>Use a <code>for</code> loop to generate three random cards for the
<code>player_hand</code> and three for the
<code>computer_hand</code>.</li>
<li>Use your <code>display_card()</code> function to show the player
both hands.</li>
</ol>
<p><strong>Step 2: The Initiative</strong></p>
<ol type="1">
<li>Create a single <code>battlefield</code> table and add all 6 cards
into it.</li>
<li>Use your <code>find_fastest_card()</code> function on the
<code>battlefield</code> to find the <code>attacker</code> card.</li>
<li>Announce who is attacking:
<code>print(attacker.name .. " has the highest speed and attacks first!")</code>.</li>
</ol>
<p><strong>Step 3: Whose Turn Is It?</strong> Now we’ll use a boolean to
track whose turn it is.</p>
<ol type="1">
<li>Create a variable <code>is_player_turn = false</code>. This is our
light switch, and we’ll start with it “off”.</li>
<li>Use a <code>for</code> loop to go through the
<code>player_hand</code>. Inside the loop, use an <code>if</code>
statement to check if the current card is the same as the
<code>attacker</code>. If it is, flip our switch to on: set
<code>is_player_turn = true</code>.</li>
</ol>
<p><strong>Step 4: The Attack!</strong> This is where we use our big
<code>if/then/else</code> brain to check our boolean “switch”.</p>
<ol type="1">
<li>Write an
<code>if is_player_turn == true then ... else ... end</code> block.</li>
<li><strong>Inside the <code>if</code> block (Player’s Turn):</strong>
<ul>
<li>Print the computer’s cards as a numbered list of targets.</li>
<li>Prompt the player to choose a target.</li>
<li>Use <code>io.read()</code> and <code>tonumber()</code> to get their
choice.</li>
<li>Set a <code>target</code> variable to the chosen card from the
<code>computer_hand</code>.</li>
</ul></li>
<li><strong>Inside the <code>else</code> block (Computer’s
Turn):</strong>
<ul>
<li>Use <code>math.random(3)</code> to pick a random target index.</li>
<li>Set the <code>target</code> variable to the card from the
<code>player_hand</code> at that index.</li>
<li>Announce who the computer chose to attack.</li>
</ul></li>
</ol>
<p><strong>Step 5: The Aftermath</strong> This code goes <em>after</em>
the <code>if/then/else</code> block.</p>
<ol type="1">
<li>Calculate the new life:
<code>target.life = target.life - attacker.attack</code>.</li>
<li>Print the action:
<code>print(attacker.name .. " attacks " .. target.name .. ", dealing " .. attacker.attack .. " damage!")</code></li>
<li>Use a final <code>if</code> statement to check if
<code>target.life &lt;= 0</code>. If so, print that the card was
defeated. Otherwise, print its remaining life.</li>
</ol>
<p>And… scene! You’ve just created a fully interactive battle
sequence.</p>
<h2 data-number="8.5" id="the-troubleshooting-scroll-4"><span
class="header-section-number">8.5</span> The Troubleshooting Scroll</h2>
<ul>
<li><strong>Error: <code>attempt to compare number with nil</code> in my
<code>if</code> statement.</strong>
<ul>
<li><strong>Meaning:</strong> This often happens after asking for user
input. If the player types “one” instead of “1”,
<code>tonumber("one")</code> results in <code>nil</code> (nothing). You
can’t compare a number to nothing.</li>
<li><strong>Check:</strong> For now, just be careful to type a real
number.</li>
</ul></li>
<li><strong>The program crashes if I enter a number like 4 or 0 for my
target.</strong>
<ul>
<li><strong>Meaning:</strong> You’re trying to get
<code>computer_hand[4]</code>, but there’s nothing there, so you get
<code>nil</code>.</li>
<li><strong>Check:</strong> Your code is working correctly! The player
gave an invalid index. For now, just be sure to choose 1, 2, or 3.</li>
</ul></li>
</ul>
<nav id="sitenav">
<div class="sitenav">
<span class="navlink next">
<span class="navlink-label">Next Up:</span> <a href="9-the-grand-melee.html" accesskey="n" rel="next">The Grand Melee 💥</a>
</span>
<span class="navlink">
</span>
</div>
<div class="sitenav">
<span class="navlink top">
<a href="index.html" accesskey="t" rel="top">Code &amp; Sorcery: A Lua Card Game Quest</a>
</span>
</div>
</nav>
</body>
</html>
