<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Crafting the Card’s Soul</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<h1 data-number="3" id="crafting-the-cards-soul"><span
class="header-section-number">3</span> Crafting the Card’s Soul</h1>
<hr />
<h2 data-number="3.1" id="the-story-so-far"><span
class="header-section-number">3.1</span> The Story So Far…</h2>
<p>Awesome work on summoning your first creature! You taught the
computer to remember four different things about it: its name, life,
attack, and speed, using four separate variables.</p>
<p>But there’s a small problem. In our code, the variable
<code>card_name</code> has no idea it belongs with
<code>card_life</code>. They’re like four separate ghosts floating
around, and we just happen to know they describe the same creature. If
we wanted to make a second card, we’d need four <em>more</em> variables
(<code>card2_name</code>, <code>card2_life</code>…). That would get
confusing fast!</p>
<p>Today, we’re going to fix that. We’re going to give our card a
“soul”—a single container that holds all its information together.</p>
<h2 data-number="3.2"
id="the-mission-what-well-accomplish-today-1"><span
class="header-section-number">3.2</span> The Mission: What We’ll
Accomplish Today</h2>
<p>By the end of this session, our program will produce the
<strong>exact same output as before</strong>, but our code will be much
cleaner and smarter. We will:</p>
<ol type="1">
<li>Learn how to store all of a card’s data inside a single
variable.</li>
<li>Adapt our code to use this new, organized structure.</li>
</ol>
<p>The big change isn’t what the program <em>does</em>, but <em>how</em>
our code is written. This is a huge step in programming: learning to
write clean, organized code.</p>
<h2 data-number="3.3" id="the-spellbook-new-tools-well-learn-1"><span
class="header-section-number">3.3</span> The Spellbook: New Tools We’ll
Learn</h2>
<p>We only need one new, super-powerful tool for this mission.</p>
<p><strong>1. Tables: The Ultimate Organizer</strong></p>
<p>Imagine a character sheet for a game. It has labels like “Name,”
“HP,” and “Strength,” and next to each label is a value. A
<strong>table</strong> in Lua is exactly like that! It’s a master
variable that can hold a bunch of other values inside it, each with its
own label (which we call a <strong>key</strong>).</p>
<p>Here’s how we turn our four separate variables from our original code
…</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">card_name</span> <span class="op">=</span> <span class="st">&quot;Goblin Grunt&quot;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">card_life</span> <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">card_attack</span> <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">card_speed</span> <span class="op">=</span> <span class="dv">3</span></span></code></pre></div>
<p>…into one awesome table:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- The new, organized way!</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">goblin_grunt</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="va">name</span> <span class="op">=</span> <span class="st">&quot;Goblin Grunt&quot;</span><span class="op">,</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="va">life</span> <span class="op">=</span> <span class="dv">5</span><span class="op">,</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="va">attack</span> <span class="op">=</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="va">speed</span> <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>We create it using curly braces <code>{}</code>. Inside, we list our
<code>key = value</code> pairs, separated by commas. Now, the
<code>goblin_grunt</code> variable holds everything!</p>
<p><strong>2. Dot Notation: Accessing the Data</strong></p>
<p>Okay, so everything is inside the <code>goblin_grunt</code> box. How
do we get the <code>life</code> value out? We use a dot
(<code>.</code>)! This is called <strong>dot notation</strong>.</p>
<p>You write the name of the table, then a dot, then the key you
want.</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- To get the life value from the table:</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span><span class="op">(</span><span class="va">goblin_grunt</span><span class="op">.</span><span class="va">life</span><span class="op">)</span>  <span class="co">-- This will print the number 5</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- To get the name:</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span><span class="op">(</span><span class="va">goblin_grunt</span><span class="op">.</span><span class="va">name</span><span class="op">)</span>  <span class="co">-- This will print &quot;Goblin Grunt&quot;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- We can even use it with our concatenation spell from last time!</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span><span class="op">(</span><span class="st">&quot;The creature&#39;s attack power is: &quot;</span> <span class="op">..</span> <span class="va">goblin_grunt</span><span class="op">.</span><span class="va">attack</span><span class="op">)</span></span></code></pre></div>
<h2 data-number="3.4"
id="the-training-grounds-practice-your-spells-1"><span
class="header-section-number">3.4</span> The Training Grounds: Practice
Your Spells</h2>
<p>Let’s practice making tables for things other than cards.</p>
<p><strong>Practice #1: The Player Profile</strong></p>
<ul>
<li>Create a single table variable named <code>player</code>.</li>
<li>Inside this table, add keys for <code>name</code>,
<code>gold</code>, and <code>level</code>. Give them any values you like
(e.g., <code>"Gandalf"</code>, <code>500</code>, <code>10</code>).</li>
<li>Write three <code>print()</code> statements that use dot notation to
display each piece of the player’s information, like
<code>"Player's Gold: 500"</code>.</li>
</ul>
<p><strong>Practice #2: A Potion’s Recipe</strong></p>
<ul>
<li>Create a table variable for a magic potion, maybe called
<code>health_potion</code>.</li>
<li>Inside it, add keys like <code>name</code> (“Greater Health
Potion”), <code>color</code> (“shimmering red”), <code>restores</code>
(50), and <code>is_rare</code>
(<strong><code>true</code></strong>).</li>
<li><strong>Bonus concept:</strong> <code>true</code> and
<code>false</code> are a new data type called a
<strong>boolean</strong>. They are great for yes/no questions!</li>
<li>Print out a sentence describing the potion using its data, like
<code>"Greater Health Potion is a shimmering red color and restores 50 health."</code></li>
</ul>
<h2 data-number="3.5" id="your-quest-reforge-your-creature"><span
class="header-section-number">3.5</span> Your Quest: Reforge Your
Creature!</h2>
<p>Time to upgrade your initial code. Your mission is to “reforge” your
creature using a table.</p>
<p><strong>Instructions:</strong></p>
<ol type="1">
<li>Open your <code>my_first_card.lua</code> file from last time. You
can save a copy of it first if you want.</li>
<li>Delete the four separate <code>local</code> variables for the card’s
stats.</li>
<li>In their place, create <strong>one</strong> table variable (e.g.,
<code>my_card</code> or <code>goblin_grunt</code>).</li>
<li>Inside this table, add the <code>name</code>, <code>life</code>,
<code>attack</code>, and <code>speed</code> as keys, and assign them the
same values you had before.</li>
<li>Go down to your <code>print()</code> statements and update them to
use <strong>dot notation</strong> to get the information from your new
table.</li>
<li>Run the program. The output on the screen should look exactly the
same as before, but you’ll know that your code is now a hundred times
more organized!</li>
</ol>
<h2 data-number="3.6"
id="the-troubleshooting-scroll-when-spells-go-wrong-1"><span
class="header-section-number">3.6</span> The Troubleshooting Scroll:
When Spells Go Wrong</h2>
<p>Crafting with tables can be tricky at first. Here are some common
mistakes:</p>
<ul>
<li><p><strong>Error:</strong>
<code>... '}' expected (to close '{' ...) near 'attack'</code></p>
<ul>
<li><strong>Meaning:</strong> The computer got confused while reading
the list of things inside your table.</li>
<li><strong>Check:</strong> Did you remember to put a
<strong>comma</strong> <code>,</code> after each key-value pair inside
the table? You need one to separate <code>name = "Goblin",</code> from
<code>life = 5,</code>. The last item doesn’t strictly need a comma, but
it’s good practice to add one anyway.</li>
</ul></li>
<li><p><strong>Error:</strong>
<code>... attempt to index a nil value (global 'goblin_grunt')</code></p>
<ul>
<li><strong>Meaning:</strong> You’re trying to get a value from a table
that doesn’t exist.</li>
<li><strong>Check:</strong> Did you misspell the table’s variable name?
Remember, <code>goblin_grunt</code> and <code>Goblin_Grunt</code> are
different!</li>
</ul></li>
<li><p><strong>Error:</strong>
<code>... attempt to concatenate a nil value (field 'attak')</code></p>
<ul>
<li><strong>Meaning:</strong> The table exists, but the
<strong>key</strong> you asked for (<code>attak</code>) isn’t in it.
“nil” means “nothing,” so you’re trying to print nothing.</li>
<li><strong>Check:</strong> Did you misspell the key inside the dot
notation? For example, writing <code>goblin_grunt.attak</code> when the
key in the table is actually <code>attack</code>.</li>
</ul></li>
</ul>
<nav id="sitenav">
<div class="sitenav">
<span class="navlink next">
<span class="navlink-label">Next Up:</span> <a href="4-assembling-your-army.html" accesskey="n" rel="next">Assembling Your Army</a>
</span>
<span class="navlink">
</span>
</div>
<div class="sitenav">
<span class="navlink top">
<a href="index.html" accesskey="t" rel="top">Code &amp; Sorcery: A Lua Card Game Quest</a>
</span>
</div>
</nav>
</body>
</html>
