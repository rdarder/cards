<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Code &amp; Sorcery: A Lua Card Game Quest</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<header id="title-block-header">
<h1 class="title">Code &amp; Sorcery: A Lua Card Game Quest</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#summoning-your-first-creature"
id="toc-summoning-your-first-creature"><span
class="toc-section-number">1</span> <strong>Summoning Your First
Creature!</strong></a></li>
<li><a href="#crafting-the-cards-soul"
id="toc-crafting-the-cards-soul"><span
class="toc-section-number">2</span> <strong>Crafting the Card‚Äôs
Soul</strong></a></li>
<li><a href="#assembling-your-army" id="toc-assembling-your-army"><span
class="toc-section-number">3</span> <strong>Assembling Your
Army</strong></a></li>
<li><a href="#automating-your-army" id="toc-automating-your-army"><span
class="toc-section-number">4</span> <strong>Automating Your Army
üîÅ</strong></a></li>
<li><a href="#creating-reusable-spells"
id="toc-creating-reusable-spells"><span
class="toc-section-number">5</span> <strong>Creating Reusable Spells
ü™Ñ</strong></a></li>
<li><a href="#the-random-card-forge"
id="toc-the-random-card-forge"><span class="toc-section-number">6</span>
<strong>The Random Card Forge üè≠</strong></a></li>
<li><a href="#the-first-clash" id="toc-the-first-clash"><span
class="toc-section-number">7</span> <strong>The First Clash!
‚öîÔ∏è</strong></a></li>
<li><a href="#the-grand-melee" id="toc-the-grand-melee"><span
class="toc-section-number">8</span> <strong>The Grand Melee
üí•</strong></a></li>
</ul>
</nav>
<h2 data-number="1" id="summoning-your-first-creature"><span
class="header-section-number">1</span> <strong>Summoning Your First
Creature!</strong></h2>
<hr />
<h3 data-number="1.1" id="lets-get-started"><span
class="header-section-number">1.1</span> <strong>Let‚Äôs Get
Started!</strong></h3>
<p>Hey! Welcome to your first step in becoming a game creator. Every
huge, amazing game you‚Äôve ever played started exactly where you are now:
with a single line of code.</p>
<p>Our big quest is to build your card game. But before we can have epic
battles, we need a creature to fight. So, today‚Äôs mission is to reach
into the digital world and summon our very first creature. We‚Äôll decide
what it is, what its powers are, and teach the computer how to show it
to us.</p>
<h3 data-number="1.2" id="the-mission-what-well-accomplish-today"><span
class="header-section-number">1.2</span> <strong>The Mission: What We‚Äôll
Accomplish Today</strong></h3>
<p>By the end of this session, we will have a simple program that:</p>
<ol type="1">
<li>Defines a single creature card with a name, life points, attack
power, and speed.</li>
<li>Prints out all of that card‚Äôs information, neatly formatted, to the
console.</li>
</ol>
<p>It will look something like this in the output:</p>
<pre><code>--- My First Card ---
Name: Goblin Grunt
Life: 5
Attack: 2
Speed: 3</code></pre>
<h3 data-number="1.3" id="the-spellbook-new-tools-well-learn"><span
class="header-section-number">1.3</span> <strong>The Spellbook: New
Tools We‚Äôll Learn</strong></h3>
<p>To summon our creature, we need to learn a few basic ‚Äúspells‚Äù in
Lua.</p>
<p><strong>1. Variables: The Magic Boxes</strong></p>
<p>Imagine you have a bunch of magic, labeled boxes. You can put
something inside a box and, later, you can ask for whatever is in the
box just by using its label. In programming, these boxes are called
<strong>variables</strong>. They hold information for us.</p>
<p>To create a variable in Lua, we write <code>local</code>, give it a
name, use <code>=</code>, and then put the information we want to
store.</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- This creates a variable named &#39;playerName&#39; and stores the text &quot;Alex&quot; in it.</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">playerName</span> <span class="op">=</span> <span class="st">&quot;Alex&quot;</span></span></code></pre></div>
<p><strong>2. Data Types: Kinds of Magic</strong></p>
<p>You can‚Äôt store a potion in a box meant for a sword! Different types
of information need different kinds of variables. For today, we only
need to know two types:</p>
<ul>
<li><p><strong>Strings:</strong> This is just text. Anything you wrap in
double quotes (<code>"..."</code>) is a <code>string</code>. We‚Äôll use
this for our creature‚Äôs name.</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">creatureName</span> <span class="op">=</span> <span class="st">&quot;Dragon Hatchling&quot;</span></span></code></pre></div></li>
<li><p><strong>Numbers:</strong> These are‚Ä¶ well, numbers! No quotes
needed. We‚Äôll use these for our card‚Äôs stats like life, attack, and
speed.</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">creatureLife</span> <span class="op">=</span> <span class="dv">10</span></span></code></pre></div></li>
</ul>
<p><strong>3. <code>print()</code>: The Announcer Spell</strong></p>
<p>What good is creating a creature if we can‚Äôt see it? The
<code>print()</code> command tells the computer to display something on
the screen. You just put what you want to show inside the
parentheses.</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">score</span> <span class="op">=</span> <span class="dv">1500</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span><span class="op">(</span><span class="va">score</span><span class="op">)</span> <span class="co">-- This will show the number 1500 on the screen</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span><span class="op">(</span><span class="st">&quot;Game Over!&quot;</span><span class="op">)</span> <span class="co">-- This will show the text Game Over!</span></span></code></pre></div>
<p><strong>4. String Concatenation: Gluing Text Together</strong></p>
<p>What if we want to print a nice label <em>and</em> our variable‚Äôs
value in the same line? We need to ‚Äúglue‚Äù them together. In Lua, the
glue is two dots <code>..</code>. This is called
<strong>concatenation</strong>.</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">creatureName</span> <span class="op">=</span> <span class="st">&quot;Goblin Grunt&quot;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span><span class="op">(</span><span class="st">&quot;The creature&#39;s name is: &quot;</span> <span class="op">..</span> <span class="va">creatureName</span><span class="op">)</span></span></code></pre></div>
<p>This will print <code>The creature's name is: Goblin Grunt</code> all
on one line. It takes the string on the left, glues on the value from
the <code>creatureName</code> variable, and prints the new, combined
string.</p>
<p><strong>5. Comments: Notes to Yourself</strong></p>
<p>Sometimes, you want to write notes in your code to remember what
something does. If you start a line with two dashes <code>--</code>, the
computer will completely ignore it. These are <strong>comments</strong>,
and they are for humans only!</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- This variable stores the player&#39;s health.</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">playerHealth</span> <span class="op">=</span> <span class="dv">100</span> <span class="co">-- Start with full health</span></span></code></pre></div>
<h3 data-number="1.4"
id="the-training-grounds-practice-your-spells"><span
class="header-section-number">1.4</span> <strong>The Training Grounds:
Practice Your Spells</strong></h3>
<p>Before we summon the real creature, let‚Äôs warm up with these small
exercises. Try writing them in a separate test file.</p>
<p><strong>Practice #1: The Scoreboard</strong></p>
<ul>
<li>Create a variable to store a player‚Äôs name (a
<code>string</code>).</li>
<li>Create another variable to store their score (a
<code>number</code>).</li>
<li>Use <code>print()</code> and string concatenation (<code>..</code>)
to display a message like
<code>Player Zeke has a score of 500</code>.</li>
</ul>
<p><strong>Practice #2: A Mighty Spell</strong></p>
<ul>
<li>Create a variable for a spell‚Äôs name, like
<code>"Fireball"</code>.</li>
<li>Create a variable for its damage, like <code>8</code>.</li>
<li>Use <code>print()</code> to announce the spell and its power, for
example: <code>Casting Fireball! It does 8 damage!</code>.</li>
</ul>
<h3 data-number="1.5" id="your-quest-summon-the-creature"><span
class="header-section-number">1.5</span> <strong>Your Quest: Summon the
Creature!</strong></h3>
<p>Alright, you‚Äôre ready. Your mission is to write a Lua program from
scratch that accomplishes our goal.</p>
<p><strong>Instructions:</strong></p>
<ol type="1">
<li>Create a new file, maybe call it
<code>my_first_card.lua</code>.</li>
<li>Inside, create <strong>four variables</strong> for your first
creature. You‚Äôll need one for its name (<code>string</code>), and three
for its life, attack, and speed (<code>number</code>s). Choose any name
and stats you want! Be creative.</li>
<li>Use comments to label what each part of your code does.</li>
<li>Use the <code>print()</code> command and <code>..</code> to display
the card‚Äôs stats neatly. Try to match the format we showed at the
beginning of the mission.</li>
</ol>
<p>Go for it! I‚Äôll be here to help if you get stuck.</p>
<h3 data-number="1.6"
id="the-troubleshooting-scroll-when-spells-go-wrong"><span
class="header-section-number">1.6</span> <strong>The Troubleshooting
Scroll: When Spells Go Wrong</strong></h3>
<p>Even the best wizards mess up a spell sometimes. If your code doesn‚Äôt
run, you‚Äôll see an error message. Here are a few common ones and what
they mean:</p>
<ul>
<li><p><strong>Error:</strong>
<code>... attempt to concatenate a nil value (local 'creatureName')</code></p>
<ul>
<li><strong>Meaning:</strong> You‚Äôre trying to use a variable that
doesn‚Äôt exist or is empty (‚Äúnil‚Äù means nothing).</li>
<li><strong>Check:</strong> Did you misspell your variable name?
Remember, <code>creatureName</code> and <code>creaturename</code> are
two different things to the computer (it‚Äôs case-sensitive!).</li>
</ul></li>
<li><p><strong>Error:</strong>
<code>... 'then' expected near 'Grunt'</code></p>
<ul>
<li><strong>Meaning:</strong> This confusing error often happens when
you forget the quotes <code>"</code> around a string. If you write
<code>local name = Goblin Grunt</code>, the computer gets confused and
thinks <code>Goblin</code> is a command.</li>
<li><strong>Check:</strong> Make sure all your text values are wrapped
in double quotes!</li>
</ul></li>
<li><p><strong>Error:</strong>
<code>... attempt to perform arithmetic on a string value</code></p>
<ul>
<li><strong>Meaning:</strong> You tried to use a math operator like
<code>+</code> to connect strings. Lua is picky and uses <code>..</code>
for that.</li>
<li><strong>Check:</strong> Make sure you‚Äôre using the double dots
<code>..</code> to glue strings together, not <code>+</code>.</li>
</ul></li>
</ul>
<h2 data-number="2" id="crafting-the-cards-soul"><span
class="header-section-number">2</span> <strong>Crafting the Card‚Äôs
Soul</strong></h2>
<hr />
<h3 data-number="2.1" id="the-story-so-far"><span
class="header-section-number">2.1</span> <strong>The Story So
Far‚Ä¶</strong></h3>
<p>Awesome work on summoning your first creature! You taught the
computer to remember four different things about it: its name, life,
attack, and speed, using four separate variables.</p>
<p>But there‚Äôs a small problem. In our code, the variable
<code>card_name</code> has no idea it belongs with
<code>card_life</code>. They‚Äôre like four separate ghosts floating
around, and we just happen to know they describe the same creature. If
we wanted to make a second card, we‚Äôd need four <em>more</em> variables
(<code>card2_name</code>, <code>card2_life</code>‚Ä¶). That would get
confusing fast!</p>
<p>Today, we‚Äôre going to fix that. We‚Äôre going to give our card a
‚Äúsoul‚Äù‚Äîa single container that holds all its information together.</p>
<h3 data-number="2.2"
id="the-mission-what-well-accomplish-today-1"><span
class="header-section-number">2.2</span> <strong>The Mission: What We‚Äôll
Accomplish Today</strong></h3>
<p>By the end of this session, our program will produce the
<strong>exact same output as before</strong>, but our code will be much
cleaner and smarter. We will:</p>
<ol type="1">
<li>Learn how to store all of a card‚Äôs data inside a single
variable.</li>
<li>Rewrite our code from Unit 1 to use this new, organized
structure.</li>
</ol>
<p>The big change isn‚Äôt what the program <em>does</em>, but <em>how</em>
our code is written. This is a huge step in programming: learning to
write clean, organized code.</p>
<h3 data-number="2.3" id="the-spellbook-new-tools-well-learn-1"><span
class="header-section-number">2.3</span> <strong>The Spellbook: New
Tools We‚Äôll Learn</strong></h3>
<p>We only need one new, super-powerful tool for this mission.</p>
<p><strong>1. Tables: The Ultimate Organizer</strong></p>
<p>Imagine a character sheet for a game. It has labels like ‚ÄúName,‚Äù
‚ÄúHP,‚Äù and ‚ÄúStrength,‚Äù and next to each label is a value. A
<strong>table</strong> in Lua is exactly like that! It‚Äôs a master
variable that can hold a bunch of other values inside it, each with its
own label (which we call a <strong>key</strong>).</p>
<p>Here‚Äôs how we turn our four separate variables‚Ä¶</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- The old way from Unit 1</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">card_name</span> <span class="op">=</span> <span class="st">&quot;Goblin Grunt&quot;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">card_life</span> <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">card_attack</span> <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">card_speed</span> <span class="op">=</span> <span class="dv">3</span></span></code></pre></div>
<p>‚Ä¶into one awesome table:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- The new, organized way!</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">goblin_grunt</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="va">name</span> <span class="op">=</span> <span class="st">&quot;Goblin Grunt&quot;</span><span class="op">,</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="va">life</span> <span class="op">=</span> <span class="dv">5</span><span class="op">,</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="va">attack</span> <span class="op">=</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="va">speed</span> <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>We create it using curly braces <code>{}</code>. Inside, we list our
<code>key = value</code> pairs, separated by commas. Now, the
<code>goblin_grunt</code> variable holds everything!</p>
<p><strong>2. Dot Notation: Accessing the Data</strong></p>
<p>Okay, so everything is inside the <code>goblin_grunt</code> box. How
do we get the <code>life</code> value out? We use a dot
(<code>.</code>)! This is called <strong>dot notation</strong>.</p>
<p>You write the name of the table, then a dot, then the key you
want.</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- To get the life value from the table:</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span><span class="op">(</span><span class="va">goblin_grunt</span><span class="op">.</span><span class="va">life</span><span class="op">)</span>  <span class="co">-- This will print the number 5</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- To get the name:</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span><span class="op">(</span><span class="va">goblin_grunt</span><span class="op">.</span><span class="va">name</span><span class="op">)</span>  <span class="co">-- This will print &quot;Goblin Grunt&quot;</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- We can even use it with our concatenation spell from last time!</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span><span class="op">(</span><span class="st">&quot;The creature&#39;s attack power is: &quot;</span> <span class="op">..</span> <span class="va">goblin_grunt</span><span class="op">.</span><span class="va">attack</span><span class="op">)</span></span></code></pre></div>
<h3 data-number="2.4"
id="the-training-grounds-practice-your-spells-1"><span
class="header-section-number">2.4</span> <strong>The Training Grounds:
Practice Your Spells</strong></h3>
<p>Let‚Äôs practice making tables for things other than cards.</p>
<p><strong>Practice #1: The Player Profile</strong></p>
<ul>
<li>Create a single table variable named <code>player</code>.</li>
<li>Inside this table, add keys for <code>name</code>,
<code>gold</code>, and <code>level</code>. Give them any values you like
(e.g., <code>"Gandalf"</code>, <code>500</code>, <code>10</code>).</li>
<li>Write three <code>print()</code> statements that use dot notation to
display each piece of the player‚Äôs information, like
<code>"Player's Gold: 500"</code>.</li>
</ul>
<p><strong>Practice #2: A Potion‚Äôs Recipe</strong></p>
<ul>
<li>Create a table variable for a magic potion, maybe called
<code>health_potion</code>.</li>
<li>Inside it, add keys like <code>name</code> (‚ÄúGreater Health
Potion‚Äù), <code>color</code> (‚Äúshimmering red‚Äù), <code>restores</code>
(50), and <code>is_rare</code>
(<strong><code>true</code></strong>).</li>
<li><strong>Bonus concept:</strong> <code>true</code> and
<code>false</code> are a new data type called a
<strong>boolean</strong>. They are great for yes/no questions!</li>
<li>Print out a sentence describing the potion using its data, like
<code>"Greater Health Potion is a shimmering red color and restores 50 health."</code></li>
</ul>
<h3 data-number="2.5" id="your-quest-reforge-your-creature"><span
class="header-section-number">2.5</span> <strong>Your Quest: Reforge
Your Creature!</strong></h3>
<p>Time to upgrade your code from Unit 1. Your mission is to ‚Äúreforge‚Äù
your creature using a table.</p>
<p><strong>Instructions:</strong></p>
<ol type="1">
<li>Open your <code>my_first_card.lua</code> file from last time. You
can save a copy of it first if you want.</li>
<li>Delete the four separate <code>local</code> variables for the card‚Äôs
stats.</li>
<li>In their place, create <strong>one</strong> table variable (e.g.,
<code>my_card</code> or <code>goblin_grunt</code>).</li>
<li>Inside this table, add the <code>name</code>, <code>life</code>,
<code>attack</code>, and <code>speed</code> as keys, and assign them the
same values you had before.</li>
<li>Go down to your <code>print()</code> statements and update them to
use <strong>dot notation</strong> to get the information from your new
table.</li>
<li>Run the program. The output on the screen should look exactly the
same as before, but you‚Äôll know that your code is now a hundred times
more organized!</li>
</ol>
<h3 data-number="2.6"
id="the-troubleshooting-scroll-when-spells-go-wrong-1"><span
class="header-section-number">2.6</span> <strong>The Troubleshooting
Scroll: When Spells Go Wrong</strong></h3>
<p>Crafting with tables can be tricky at first. Here are some common
mistakes:</p>
<ul>
<li><p><strong>Error:</strong>
<code>... '}' expected (to close '{' ...) near 'attack'</code></p>
<ul>
<li><strong>Meaning:</strong> The computer got confused while reading
the list of things inside your table.</li>
<li><strong>Check:</strong> Did you remember to put a
<strong>comma</strong> <code>,</code> after each key-value pair inside
the table? You need one to separate <code>name = "Goblin",</code> from
<code>life = 5,</code>. The last item doesn‚Äôt strictly need a comma, but
it‚Äôs good practice to add one anyway.</li>
</ul></li>
<li><p><strong>Error:</strong>
<code>... attempt to index a nil value (global 'goblin_grunt')</code></p>
<ul>
<li><strong>Meaning:</strong> You‚Äôre trying to get a value from a table
that doesn‚Äôt exist.</li>
<li><strong>Check:</strong> Did you misspell the table‚Äôs variable name?
Remember, <code>goblin_grunt</code> and <code>Goblin_Grunt</code> are
different!</li>
</ul></li>
<li><p><strong>Error:</strong>
<code>... attempt to concatenate a nil value (field 'attak')</code></p>
<ul>
<li><strong>Meaning:</strong> The table exists, but the
<strong>key</strong> you asked for (<code>attak</code>) isn‚Äôt in it.
‚Äúnil‚Äù means ‚Äúnothing,‚Äù so you‚Äôre trying to print nothing.</li>
<li><strong>Check:</strong> Did you misspell the key inside the dot
notation? For example, writing <code>goblin_grunt.attak</code> when the
key in the table is actually <code>attack</code>.</li>
</ul></li>
</ul>
<h2 data-number="3" id="assembling-your-army"><span
class="header-section-number">3</span> <strong>Assembling Your
Army</strong></h2>
<hr />
<h3 data-number="3.1" id="the-story-so-far-1"><span
class="header-section-number">3.1</span> <strong>The Story So
Far‚Ä¶</strong></h3>
<p>You‚Äôve successfully crafted the ‚Äúsoul‚Äù of a single creature, storing
all its stats neatly in one table. Your code is clean and organized. But
a master summoner never relies on a single creature; they command an
army! It‚Äôs time to go from one card to a full deck.</p>
<h3 data-number="3.2"
id="the-mission-what-well-accomplish-today-2"><span
class="header-section-number">3.2</span> <strong>The Mission: What We‚Äôll
Accomplish Today</strong></h3>
<p>Our main goal is to create a deck of cards. By the end, we‚Äôll have a
program that defines several different cards and bundles them into a
single ‚Äúdeck‚Äù variable. We‚Äôll also take on some challenging side quests
to make our code even more powerful.</p>
<h3 data-number="3.3" id="the-spellbook-new-tools-well-learn-2"><span
class="header-section-number">3.3</span> <strong>The Spellbook: New
Tools We‚Äôll Learn</strong></h3>
<p><strong>1. Tables as Lists (The Card Box)</strong></p>
<p>We‚Äôre going to use our trusty <code>table</code> tool in a new way.
Instead of using named keys like <code>name = "..."</code>, we‚Äôre just
going to put our finished card-tables into a list, separated by commas.
Think of it like putting your individual cards into a deck box.</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- First, we define our individual cards, just like in Unit 2</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">goblin</span> <span class="op">=</span> <span class="op">{</span> <span class="va">name</span> <span class="op">=</span> <span class="st">&quot;Goblin Grunt&quot;</span><span class="op">,</span> <span class="va">life</span> <span class="op">=</span> <span class="dv">5</span><span class="op">,</span> <span class="va">speed</span> <span class="op">=</span> <span class="dv">3</span><span class="op">,</span> <span class="va">attack</span> <span class="op">=</span> <span class="dv">2</span> <span class="op">}</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">golem</span> <span class="op">=</span> <span class="op">{</span> <span class="va">name</span> <span class="op">=</span> <span class="st">&quot;Stone Golem&quot;</span><span class="op">,</span> <span class="va">life</span> <span class="op">=</span> <span class="dv">10</span><span class="op">,</span> <span class="va">speed</span> <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> <span class="va">attack</span> <span class="op">=</span> <span class="dv">1</span> <span class="op">}</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">elf</span> <span class="op">=</span> <span class="op">{</span> <span class="va">name</span> <span class="op">=</span> <span class="st">&quot;Swift Elf&quot;</span><span class="op">,</span> <span class="va">life</span> <span class="op">=</span> <span class="dv">3</span><span class="op">,</span> <span class="va">speed</span> <span class="op">=</span> <span class="dv">5</span><span class="op">,</span> <span class="va">attack</span> <span class="op">=</span> <span class="dv">3</span> <span class="op">}</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- Now, we put them all into one &quot;deck&quot; table!</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">deck</span> <span class="op">=</span> <span class="op">{</span> <span class="va">goblin</span><span class="op">,</span> <span class="va">golem</span><span class="op">,</span> <span class="va">elf</span> <span class="op">}</span></span></code></pre></div>
<p><strong>2. Accessing by Index (Picking a Card)</strong></p>
<p>How do you get the second card from the deck? You can‚Äôt use a dot
because there‚Äôs no name. Instead, we use a number in <strong>square
brackets <code>[ ]</code></strong>. This number is called the
<strong>index</strong>.</p>
<p><strong>Important:</strong> In Lua, the first item is at index
<strong>1</strong>.</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Get the second card from the deck (the golem)</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">second_card</span> <span class="op">=</span> <span class="va">deck</span><span class="op">[</span><span class="dv">2</span><span class="op">]</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Now we can use dot notation on the card we picked!</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span><span class="op">(</span><span class="st">&quot;The second card&#39;s name is: &quot;</span> <span class="op">..</span> <span class="va">second_card</span><span class="op">.</span><span class="va">name</span><span class="op">)</span> <span class="co">-- Prints &quot;Stone Golem&quot;</span></span></code></pre></div>
<p><strong>3. The Length Operator (Counting Your Cards)</strong></p>
<p>Need to know how many cards are in your deck? Just put a hashtag
<code>#</code> in front of the table‚Äôs name.</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span><span class="op">(</span><span class="st">&quot;There are &quot;</span> <span class="op">..</span> <span class="op">#</span><span class="va">deck</span> <span class="op">..</span> <span class="st">&quot; cards in the deck.&quot;</span><span class="op">)</span> <span class="co">-- Prints &quot;3&quot;</span></span></code></pre></div>
<p><strong>4. Conditionals: <code>if/then</code> (Making a
Choice)</strong></p>
<p>To make our program interesting, it needs to make decisions. The
<strong><code>if</code> statement</strong> is our tool for this. It
checks if a condition is <code>true</code>, and if it is, it runs a
block of code.</p>
<p><strong>Analogy:</strong> You look outside and ask a question: ‚ÄúIs it
raining?‚Äù <strong>If</strong> the answer is yes, <strong>then</strong>
you grab an umbrella.</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">player_score</span> <span class="op">=</span> <span class="dv">250</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">high_score</span> <span class="op">=</span> <span class="dv">200</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">player_score</span> <span class="op">&gt;</span> <span class="va">high_score</span> <span class="cf">then</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span><span class="op">(</span><span class="st">&quot;You got a new high score!&quot;</span><span class="op">)</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- The code inside only runs because player_score &gt; high_score is true.</span></span></code></pre></div>
<p>The <code>condition</code> is a question that can be answered with
<code>true</code> or <code>false</code>, like <code>speed &gt; 5</code>
or <code>life &lt;= 0</code>. We‚Äôll need this for our next quest.</p>
<h3 data-number="3.4" id="your-quest-assemble-the-deck"><span
class="header-section-number">3.4</span> <strong>Your Quest: Assemble
the Deck!</strong></h3>
<p>First, let‚Äôs get the main part done.</p>
<p><strong>Instructions:</strong></p>
<ol type="1">
<li>In your <code>main.lua</code> file, create at least three different
creature cards as table variables (like <code>goblin</code>,
<code>golem</code>, <code>elf</code>, etc.). Give them unique names and
stats.</li>
<li>Create one final table called <code>deck</code> and place your card
variables inside it, just like the example.</li>
<li>Use <code>print()</code> and the index <code>[ ]</code> syntax to
display the name of the <em>second</em> card in your deck.</li>
<li>Use <code>print()</code> and the <code>#</code> operator to display
the total number of cards in the deck.</li>
</ol>
<hr />
<h3 data-number="3.5" id="side-quest-1-a-separate-spellbook"><span
class="header-section-number">3.5</span> <strong>Side Quest 1: A
Separate Spellbook üìú</strong></h3>
<p>Your main file is going to get crowded if you define every single
card there. Let‚Äôs move them to their own file!</p>
<p><strong>Instructions:</strong></p>
<ol type="1">
<li>Create a <strong>new file</strong> in the same folder and name it
<code>cards.lua</code>.</li>
<li><strong>Cut</strong> your card definitions from
<code>main.lua</code> and <strong>paste</strong> them into
<code>cards.lua</code>.</li>
<li>In <code>cards.lua</code>, create a master list of all your cards.
At the very end of the file, <strong>return</strong> that list. Your
<code>cards.lua</code> should look like this:
<code>lua     -- cards.lua     local goblin = { name = "Goblin Grunt", life = 5, speed = 3, attack = 2 }     local golem = { name = "Stone Golem", life = 10, speed = 1, attack = 1 }     local elf = { name = "Swift Elf", life = 3, speed = 5, attack = 3 }     local all_cards = { goblin, golem, elf }     return all_cards</code></li>
<li>Now, go back to your <strong><code>main.lua</code></strong> file.
Use a new spell called <strong><code>require</code></strong> to load the
file and get the table it <code>return</code>ed.
<code>lua     -- main.lua     local deck = require("cards")     print("Successfully loaded " .. #deck .. " cards!")     print("The first card is: " .. deck[1].name)</code></li>
</ol>
<hr />
<h3 data-number="3.6" id="side-quest-2-the-speed-trial"><span
class="header-section-number">3.6</span> <strong>Side Quest 2: The Speed
Trial üí®</strong></h3>
<p>Now for a real challenge. Your program needs to figure out which card
in the deck is the fastest. We don‚Äôt know loops yet, so we have to do it
manually by comparing the cards one by one.</p>
<p><strong>The Logic:</strong> You need a variable to keep track of the
fastest card you‚Äôve found <em>so far</em>. You start by assuming the
first card is the fastest. Then you use an <strong><code>if</code>
statement</strong> to compare it to the second card. If the second is
faster, it becomes the new ‚Äúfastest so far.‚Äù Then you compare the
current fastest to the third, and so on.</p>
<p><strong>Instructions (in <code>main.lua</code>):</strong></p>
<ol type="1">
<li>Make sure your deck is loaded.</li>
<li>Create a variable to hold the winner. To start, assume the first
card is the fastest:
<code>local fastest_card_so_far = deck[1]</code>.</li>
<li>Write an <strong><code>if</code> statement</strong> that compares
<code>deck[2].speed</code> to <code>fastest_card_so_far.speed</code>. If
<code>deck[2]</code> is faster, update <code>fastest_card_so_far</code>
to be <code>deck[2]</code>.</li>
<li>Write <em>another</em> <code>if</code> statement that compares
<code>deck[3].speed</code> to <code>fastest_card_so_far.speed</code>. If
<code>deck[3]</code> is faster, update
<code>fastest_card_so_far</code>.</li>
<li>Repeat this for every card in your deck.</li>
<li>Finally, after all the checks, print out the result:
<code>print("The fastest card is: " .. fastest_card_so_far.name)</code>.</li>
</ol>
<h3 data-number="3.7" id="the-troubleshooting-scroll"><span
class="header-section-number">3.7</span> <strong>The Troubleshooting
Scroll</strong></h3>
<ul>
<li><strong>Error:</strong> <code>... module 'cards' not found:</code>
<ul>
<li><strong>Meaning:</strong> Your <code>require("cards")</code> command
couldn‚Äôt find the file.</li>
<li><strong>Check:</strong> Is <code>cards.lua</code> in the exact same
folder as <code>main.lua</code>? Is the filename spelled correctly?</li>
</ul></li>
<li><strong>Error:</strong>
<code>... attempt to index a nil value (local 'deck')</code> when using
<code>deck[1]</code>
<ul>
<li><strong>Meaning:</strong> Your <code>deck</code> variable is
empty.</li>
<li><strong>Check:</strong> Did you remember to add
<code>return all_cards</code> at the very end of your
<code>cards.lua</code> file? If you forget, <code>require</code> gets
nothing back.</li>
</ul></li>
<li><strong>Error:</strong> <code>'then' expected near ...</code>
<ul>
<li><strong>Meaning:</strong> This is a syntax error in your
<code>if</code> statement.</li>
<li><strong>Check:</strong> Did you remember to write <code>then</code>
after your condition? The correct structure is
<code>if condition then ... end</code>.</li>
</ul></li>
</ul>
<h2 data-number="4" id="automating-your-army"><span
class="header-section-number">4</span> <strong>Automating Your Army
üîÅ</strong></h2>
<hr />
<h3 data-number="4.1" id="the-story-so-far-2"><span
class="header-section-number">4.1</span> <strong>The Story So
Far‚Ä¶</strong></h3>
<p>You‚Äôve assembled a mighty army and organized it into a deck. You even
figured out how to find the fastest card. But‚Ä¶ it was a bit clumsy,
wasn‚Äôt it? You had to write a separate <code>if</code> statement for
<code>deck[2]</code>, <code>deck[3]</code>, and so on. If your deck had
50 cards, your code would be huge and fragile!</p>
<p>That kind of repetitive work is for computers, not for master
summoners like you. Today, you‚Äôll learn the automation spell that tells
the computer: ‚ÄúDo this for every card in the deck!‚Äù</p>
<h3 data-number="4.2"
id="the-mission-what-well-accomplish-today-3"><span
class="header-section-number">4.2</span> <strong>The Mission: What We‚Äôll
Accomplish Today</strong></h3>
<p>By the end of this session, you will have upgraded your code with
<strong>loops</strong>. Your new program will be able to:</p>
<ol type="1">
<li>Display every single card in your deck with just a few lines of
code.</li>
<li>Find the fastest card in the deck, no matter if there are 3 cards or
300, using one small, elegant block of code.</li>
</ol>
<h3 data-number="4.3" id="the-spellbook-new-tools-well-learn-3"><span
class="header-section-number">4.3</span> <strong>The Spellbook: New
Tools We‚Äôll Learn</strong></h3>
<p><strong>1. <code>for</code> Loops: The Repetition Spell</strong></p>
<p>A <strong><code>for</code> loop</strong> is a way to repeat a block
of code over and over again. It‚Äôs one of the most powerful tools a
programmer has.</p>
<p><strong>2. The Numeric <code>for</code> Loop (The
Countdown)</strong></p>
<p>This is the simplest type of loop. You give it a starting number and
an ending number, and it runs the code inside for each number in
between.</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- This loop will run 5 times.</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- The variable &#39;i&#39; will be 1, then 2, then 3, all the way to 5.</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="va">i</span> <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">5</span> <span class="cf">do</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span><span class="op">(</span><span class="st">&quot;This is repetition number: &quot;</span> <span class="op">..</span> <span class="va">i</span><span class="op">)</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code></pre></div>
<p>Think of <code>i</code> as a temporary counter variable that the loop
manages for you.</p>
<p><strong>3. The <code>ipairs</code> Loop (The Grand
Inspection)</strong></p>
<p>This is the perfect tool for going through a list, like our deck. The
‚Äúi‚Äù in <code>ipairs</code> stands for ‚Äúindex,‚Äù because it goes through
your list in numerical index order (1, 2, 3‚Ä¶).</p>
<p>It gives you two variables for each trip through the loop: the item‚Äôs
position (<code>index</code>) and the item itself
(<code>value</code>).</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- &#39;ipairs(deck)&#39; tells the loop we want to inspect the deck.</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- For each card, &#39;index&#39; will be its position (1, 2, 3...)</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- and &#39;card&#39; will be the actual card table itself!</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="va">index</span><span class="op">,</span> <span class="va">card</span> <span class="kw">in</span> <span class="fu">ipairs</span><span class="op">(</span><span class="va">deck</span><span class="op">)</span> <span class="cf">do</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span><span class="op">(</span><span class="st">&quot;Checking card #&quot;</span> <span class="op">..</span> <span class="va">index</span> <span class="op">..</span> <span class="st">&quot; which is: &quot;</span> <span class="op">..</span> <span class="va">card</span><span class="op">.</span><span class="va">name</span><span class="op">)</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code></pre></div>
<p>This is much cleaner than writing <code>deck[1]</code>,
<code>deck[2]</code>, etc., because the loop hands you each card
automatically!</p>
<h3 data-number="4.4" id="your-quest-the-grand-inspection"><span
class="header-section-number">4.4</span> <strong>Your Quest: The Grand
Inspection</strong></h3>
<p>Time to put this new power to use and upgrade your old code.</p>
<p><strong>Part A: Display the Whole Deck</strong></p>
<ol type="1">
<li>In your <code>main.lua</code> file, right after you
<code>require</code> your deck of cards, write an <code>ipairs</code>
loop.</li>
<li>Inside the loop, use <code>print()</code> to display the name and
stats of each card.</li>
<li>Run it! You should see all the cards in your deck printed out, one
after the other.</li>
</ol>
<p><strong>Part B: The Ultimate Speed Trial</strong></p>
<ol type="1">
<li>Now, let‚Äôs refactor the ‚ÄúSpeed Trial‚Äù logic from last time.</li>
<li>Start by creating your <code>fastest_card_so_far</code> variable,
initializing it with <code>deck[1]</code>.</li>
<li>Create an <code>ipairs</code> loop to go through the deck.</li>
<li>Inside the loop, write a single <code>if</code> statement that
compares the current <code>card.speed</code> (from the loop) with
<code>fastest_card_so_far.speed</code>.</li>
<li>If the current <code>card</code> is faster, update
<code>fastest_card_so_far</code> to be the current
<code>card</code>.</li>
<li>After the loop is finished, print the name of the winner. Your new
code should be tiny compared to the old way, but much more
powerful!</li>
</ol>
<hr />
<h3 data-number="4.5" id="side-quest-the-barbarians-rage"><span
class="header-section-number">4.5</span> <strong>Side Quest: The
Barbarian‚Äôs Rage ‚öîÔ∏è</strong></h3>
<p>Let‚Äôs practice the numeric loop with a quick, fun challenge.</p>
<p><strong>The Task:</strong> A Barbarian character has a ‚ÄòRage‚Äô ability
that lets him attack 5 times in a row. Write a <strong>numeric
<code>for</code> loop</strong> that prints ‚ÄúSmash!‚Äù to the console 5
times.</p>
<hr />
<h3 data-number="4.6" id="the-troubleshooting-scroll-1"><span
class="header-section-number">4.6</span> <strong>The Troubleshooting
Scroll</strong></h3>
<ul>
<li><p><strong>My loop only runs once, or not at all!</strong></p>
<ul>
<li><strong>Check:</strong> Is your deck table empty? An
<code>ipairs</code> loop won‚Äôt run if there‚Äôs nothing in the table to
loop over. Make sure your <code>require("cards")</code> is working and
your deck has cards in it.</li>
</ul></li>
<li><p><strong>I get an error like
<code>attempt to index a nil value (field 'speed')</code> inside my
loop.</strong></p>
<ul>
<li><strong>Meaning:</strong> The <code>card</code> variable you‚Äôre
trying to use inside the loop is empty (<code>nil</code>).</li>
<li><strong>Check:</strong> Make sure your list only contains valid card
tables. If you have an accidental <code>nil</code> value in your list
(e.g., <code>local deck = { goblin, golem, nil, elf }</code>), the loop
will run but crash when it gets to the empty spot.</li>
</ul></li>
<li><p><strong>In my Speed Trial, the first card always
wins.</strong></p>
<ul>
<li><strong>Check:</strong> Look at your <code>if</code> statement
inside the loop. Are you comparing the loop‚Äôs <code>card.speed</code> to
the <code>fastest_card_so_far.speed</code>? A common mistake is to
accidentally compare a card to itself or use the wrong variable. The
line should be
<code>if card.speed &gt; fastest_card_so_far.speed then ...</code>.</li>
</ul></li>
</ul>
<h2 data-number="5" id="creating-reusable-spells"><span
class="header-section-number">5</span> <strong>Creating Reusable Spells
ü™Ñ</strong></h2>
<hr />
<h3 data-number="5.1" id="the-story-so-far-3"><span
class="header-section-number">5.1</span> <strong>The Story So
Far‚Ä¶</strong></h3>
<p>You‚Äôve become an expert at automation! With <code>for</code> loops,
you can command your program to inspect an entire army of cards with
just a few lines of code. Your code is powerful, but if you look
closely, our main file is becoming a bit of a messy scroll. The logic to
display a card is in one place, and the logic to find the fastest card
is in another.</p>
<p>What if you wanted to find the fastest card in the player‚Äôs deck,
<em>and also</em> in the computer‚Äôs deck? You‚Äôd have to copy and paste
that whole chunk of <code>for</code> loop code. A true master of
programming never copies and pastes code; they put it in a spellbook to
be used again and again.</p>
<h3 data-number="5.2"
id="the-mission-what-well-accomplish-today-4"><span
class="header-section-number">5.2</span> <strong>The Mission: What We‚Äôll
Accomplish Today</strong></h3>
<p>Today, we‚Äôll learn how to create <strong>functions</strong>. A
function is a named, reusable block of code‚Äîlike a spell in a spellbook.
Our mission is to clean up our code by turning our existing logic into
powerful, reusable functions.</p>
<p>By the end of this session, our program will:</p>
<ol type="1">
<li>Have a clean <code>display_card()</code> function that can print the
stats for any card.</li>
<li>Have a powerful <code>find_fastest_card()</code> function that can
find the fastest card in <em>any</em> deck we give it.</li>
<li>Use these functions to find the fastest card in both the player‚Äôs
and the computer‚Äôs deck.</li>
</ol>
<h3 data-number="5.3" id="the-spellbook-new-tools-well-learn-4"><span
class="header-section-number">5.3</span> <strong>The Spellbook: New
Tools We‚Äôll Learn</strong></h3>
<p><strong>1. Defining a Function (Writing the Spell)</strong></p>
<p>This is how you create a new function, or ‚Äúspell.‚Äù You give it a name
and tell it what ‚Äútarget‚Äù it needs to work on. This target is called a
<strong>parameter</strong>.</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- This defines a function called &#39;shout&#39;.</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- It takes one parameter, which we&#39;ll call &#39;message&#39;.</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> shout<span class="op">(</span><span class="va">message</span><span class="op">)</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">local</span> <span class="va">loud_message</span> <span class="op">=</span> <span class="fu">string.upper</span><span class="op">(</span><span class="va">message</span><span class="op">)</span> <span class="op">..</span> <span class="st">&quot;!!!&quot;</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span><span class="op">(</span><span class="va">loud_message</span><span class="op">)</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>
<p>The code inside the function doesn‚Äôt run right away. We‚Äôve just
written the spell and added it to our spellbook for later.</p>
<p><strong>2. Calling a Function (Casting the Spell)</strong></p>
<p>To use the function, you ‚Äúcall‚Äù it by its name and give it the actual
data it needs to work on. This data is called an
<strong>argument</strong>.</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Here, we call the &#39;shout&#39; function.</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- The string &quot;hello&quot; is the argument we pass to the &#39;message&#39; parameter.</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>shout<span class="op">(</span><span class="st">&quot;hello&quot;</span><span class="op">)</span> <span class="co">-- Prints &quot;HELLO!!!&quot;</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>shout<span class="op">(</span><span class="st">&quot;I&#39;m learning functions&quot;</span><span class="op">)</span> <span class="co">-- Prints &quot;I&#39;M LEARNING FUNCTIONS!!!&quot;</span></span></code></pre></div>
<p>We wrote the logic once and can now use it on any message we
want!</p>
<p><strong>3. Returning a Value (Getting a Result)</strong></p>
<p>Some spells just perform an action (like <code>shout</code>), but
others are meant to find something and give it back to you. The
<code>return</code> keyword is how a function hands a value back to the
code that called it.</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> add<span class="op">(</span><span class="va">number1</span><span class="op">,</span> <span class="va">number2</span><span class="op">)</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">local</span> <span class="va">result</span> <span class="op">=</span> <span class="va">number1</span> <span class="op">+</span> <span class="va">number2</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">result</span> <span class="co">-- This sends the value of &#39;result&#39; back out.</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- Call the function and store the returned value in a variable.</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">sum</span> <span class="op">=</span> add<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">)</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span><span class="op">(</span><span class="va">sum</span><span class="op">)</span> <span class="co">-- Prints 8</span></span></code></pre></div>
<h3 data-number="5.4" id="your-quest-part-a-the-display-charm"><span
class="header-section-number">5.4</span> <strong>Your Quest Part A: The
Display Charm</strong></h3>
<p>Let‚Äôs turn our card-display logic into a function.</p>
<p><strong>Instructions:</strong></p>
<ol type="1">
<li>Near the top of your <code>main.lua</code> file, define a new
function: <code>function display_card(a_card) ... end</code>.</li>
<li>Find your <code>ipairs</code> loop that you used to print the deck.
<strong>Cut</strong> the <code>print</code> statements from inside that
loop.</li>
<li><strong>Paste</strong> those <code>print</code> statements inside
your new <code>display_card</code> function.</li>
<li><strong>Important:</strong> Change the variable you use inside the
function to match the parameter name (e.g., change
<code>card.name</code> to <code>a_card.name</code>).</li>
<li>Now, go back to your main <code>ipairs</code> loop. The inside of
the loop should now just be one line of code: a call to your new
function!
<code>lua     for index, card in ipairs(deck) do       display_card(card) -- Cast the spell on each card in the deck!     end</code></li>
</ol>
<p>Your program will do the same thing, but your main loop is now much
cleaner, and you have a reusable tool for displaying any card you
want.</p>
<h3 data-number="5.5" id="your-quest-part-b-the-seeker-spell"><span
class="header-section-number">5.5</span> <strong>Your Quest Part B: The
Seeker Spell</strong></h3>
<p>This is where the real power becomes clear. We‚Äôll turn our ‚ÄúSpeed
Trial‚Äù code into a function and use it on two different decks.</p>
<p><strong>Instructions:</strong></p>
<ol type="1">
<li><p>First, let‚Äôs set up two decks in <code>main.lua</code>. Load your
master list of cards, and then create two smaller decks from it.</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">all_cards</span> <span class="op">=</span> <span class="fu">require</span><span class="op">(</span><span class="st">&quot;cards&quot;</span><span class="op">)</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Create two different decks for our two players.</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">player_deck</span> <span class="op">=</span> <span class="op">{</span> <span class="va">all_cards</span><span class="op">[</span><span class="dv">1</span><span class="op">],</span> <span class="va">all_cards</span><span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">}</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">computer_deck</span> <span class="op">=</span> <span class="op">{</span> <span class="va">all_cards</span><span class="op">[</span><span class="dv">2</span><span class="op">],</span> <span class="va">all_cards</span><span class="op">[</span><span class="dv">4</span><span class="op">]</span> <span class="op">}</span> <span class="co">-- Make sure you have at least 4 cards defined!</span></span></code></pre></div></li>
<li><p>Define a new function:
<code>function find_fastest_card(a_deck) ... end</code>.</p></li>
<li><p><strong>Cut</strong> all the logic from your ‚ÄúSpeed Trial‚Äù quest
(creating <code>fastest_card_so_far</code> and the <code>ipairs</code>
loop) and <strong>paste</strong> it inside this new function.</p></li>
<li><p>Adjust the code inside the function to work on the
<code>a_deck</code> parameter instead of the global
<code>deck</code>.</p></li>
<li><p>At the very end of the function, after the loop, add the line:
<code>return fastest_card_so_far</code>.</p></li>
<li><p>Now, in your main code, call your function twice‚Äîonce for each
deck‚Äîand store the results.</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">fastest_in_player_deck</span> <span class="op">=</span> find_fastest_card<span class="op">(</span><span class="va">player_deck</span><span class="op">)</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">fastest_in_computer_deck</span> <span class="op">=</span> find_fastest_card<span class="op">(</span><span class="va">computer_deck</span><span class="op">)</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span><span class="op">(</span><span class="st">&quot;--- Battle Analysis ---&quot;</span><span class="op">)</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span><span class="op">(</span><span class="st">&quot;Player&#39;s fastest card is: &quot;</span> <span class="op">..</span> <span class="va">fastest_in_player_deck</span><span class="op">.</span><span class="va">name</span><span class="op">)</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span><span class="op">(</span><span class="st">&quot;Computer&#39;s fastest card is: &quot;</span> <span class="op">..</span> <span class="va">fastest_in_computer_deck</span><span class="op">.</span><span class="va">name</span><span class="op">)</span></span></code></pre></div></li>
</ol>
<p>Run your code. You just performed a complex analysis on two different
data sets using a single, reusable spell. This is what programming is
all about!</p>
<h3 data-number="5.6" id="the-troubleshooting-scroll-2"><span
class="header-section-number">5.6</span> <strong>The Troubleshooting
Scroll</strong></h3>
<ul>
<li><p><strong>Error:
<code>... attempt to concatenate a nil value (local 'fastest_in_player_deck')</code></strong></p>
<ul>
<li><strong>Meaning:</strong> The <code>find_fastest_card</code>
function didn‚Äôt hand anything back, so the variable is empty
(<code>nil</code>).</li>
<li><strong>Check:</strong> Did you remember to put
<code>return fastest_card_so_far</code> at the very end of your
function?</li>
</ul></li>
<li><p><strong>My <code>display_card</code> function isn‚Äôt working and
gives a <code>nil</code> error.</strong></p>
<ul>
<li><strong>Check:</strong> When you defined your function, you gave the
parameter a name, like <code>a_card</code>. Did you remember to use that
<em>exact same name</em> for the variables inside the function (e.g.,
<code>a_card.name</code>, <code>a_card.life</code>)?</li>
</ul></li>
<li><p><strong>I call my function, but nothing happens.</strong></p>
<ul>
<li><strong>Check:</strong> Remember that some functions just
<code>return</code> a value; they don‚Äôt print anything themselves. After
you call <code>find_fastest_card</code>, you need to <code>print</code>
the result that it gave you back.</li>
</ul></li>
</ul>
<h2 data-number="6" id="the-random-card-forge"><span
class="header-section-number">6</span> <strong>The Random Card Forge
üè≠</strong></h2>
<hr />
<h3 data-number="6.1" id="the-story-so-far-4"><span
class="header-section-number">6.1</span> <strong>The Story So
Far‚Ä¶</strong></h3>
<p>You‚Äôve mastered creating reusable spells with functions! Your code is
clean, organized, and powerful. But you still have to write out every
single card by hand. This is slow, and it makes your game
predictable.</p>
<p>What if your game could create new, surprising cards <em>on its
own</em>, every time you play? Today, we‚Äôre building the heart of the
game factory: a function that forges brand-new, random cards from
scratch.</p>
<h3 data-number="6.2"
id="the-mission-what-well-accomplish-today-5"><span
class="header-section-number">6.2</span> <strong>The Mission: What We‚Äôll
Accomplish Today</strong></h3>
<p>Our mission is to build a single, powerful function:
<code>generate_random_card()</code>. When we call this function, it will
create and return a complete, unique, and balanced card table.</p>
<p>The generated card will have:</p>
<ol type="1">
<li>A random name, created by combining adjectives and nouns (e.g.,
‚ÄúVengeful Knight‚Äù).</li>
<li>Random stats for life, attack, and speed.</li>
<li><strong>Balanced Stats:</strong> The card will obey a special rule:
the sum of its life, attack, and speed must not be greater than a set
number (e.g., 20).</li>
</ol>
<h3 data-number="6.3" id="the-spellbook-new-tools-well-learn-5"><span
class="header-section-number">6.3</span> <strong>The Spellbook: New
Tools We‚Äôll Learn</strong></h3>
<p><strong>1. <code>math.random()</code> (The Dice Roll) üé≤</strong></p>
<p>Lua has a built-in library of math tools called <code>math</code>.
One of its most fun tools is <code>random()</code>, which works like
rolling dice.</p>
<ul>
<li><code>math.random(max)</code>: Gives you a random whole number
between 1 and <code>max</code>.</li>
<li><code>math.random(min, max)</code>: Gives you a random whole number
between <code>min</code> and <code>max</code>.</li>
</ul>
<p><strong>2. Picking a Random Item from a List</strong></p>
<p>This is a classic programming pattern. To get a random item from a
list, we get a random index number and use that to pick the item.
Remember from Unit 3, the hashtag <code>#</code> operator gets the total
number of items in a list-like table.</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">names</span> <span class="op">=</span> <span class="op">{</span> <span class="st">&quot;Goblin&quot;</span><span class="op">,</span> <span class="st">&quot;Elf&quot;</span><span class="op">,</span> <span class="st">&quot;Golem&quot;</span><span class="op">,</span> <span class="st">&quot;Dragon&quot;</span> <span class="op">}</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- #names will be 4, so this is like calling math.random(4).</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">random_index</span> <span class="op">=</span> <span class="fu">math.random</span><span class="op">(#</span><span class="va">names</span><span class="op">)</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">random_name</span> <span class="op">=</span> <span class="va">names</span><span class="op">[</span><span class="va">random_index</span><span class="op">]</span> <span class="co">-- Pick the item at that index</span></span></code></pre></div>
<p><strong>3. The <code>repeat...until</code> Loop (The Persistent
Spell)</strong></p>
<p>You‚Äôve mastered the <code>for</code> loop, which runs a
<em>known</em> number of times. A <strong><code>repeat...until</code>
loop</strong> is for when you need to do something <em>at least
once</em>, and then keep doing it until a specific condition is met.</p>
<p><strong>Analogy:</strong> A blacksmith forging a balanced sword.</p>
<ol type="1">
<li>‚Äú<strong>Repeat</strong> the following steps‚Ä¶‚Äù</li>
<li>‚ÄúForge the sword. Hammer it out. Cool it in water.‚Äù</li>
<li>‚Äú‚Ä¶<strong>until</strong> the sword is perfectly balanced.‚Äù</li>
</ol>
<p>The code inside the loop always runs once, then the condition is
checked at the end.</p>
<hr />
<h3 data-number="6.4" id="your-quest-the-grand-forging"><span
class="header-section-number">6.4</span> <strong>Your Quest: The Grand
Forging</strong></h3>
<p>We will build our <code>generate_random_card()</code> function
step-by-step.</p>
<p><strong>Step 1: The Blueprint &amp; A New Technique</strong></p>
<p>First, create the basic shell for our function.</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> generate_random_card<span class="op">()</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- We&#39;ll add more here!</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>
<p>Inside this function, we need to build a card. But since all the data
will be random, we can‚Äôt create it the way we did before. This brings us
to a new technique: <strong>building a table piece by
piece.</strong></p>
<ol type="1">
<li><p><strong>Create an empty table:</strong> You can create a table
with nothing in it. Think of it like a blank character sheet or an empty
box. <code>local new_card = {}</code></p></li>
<li><p><strong>Add fields later:</strong> You can add new key-value
pairs to any table at any time using the dot notation you already
know.</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">new_card</span> <span class="op">=</span> <span class="op">{}</span> <span class="co">-- Here&#39;s our empty box.</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Now let&#39;s add a key-value pair to it.</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="va">new_card</span><span class="op">.</span><span class="va">name</span> <span class="op">=</span> <span class="st">&quot;Temporary Name&quot;</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- The table now looks like { name = &quot;Temporary Name&quot; }</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span><span class="op">(</span><span class="va">new_card</span><span class="op">.</span><span class="va">name</span><span class="op">)</span> <span class="co">-- This will print &quot;Temporary Name&quot;</span></span></code></pre></div></li>
</ol>
<p>This is the method we‚Äôll use. We‚Äôll start with an empty
<code>new_card</code> table and add the random <code>name</code>,
<code>life</code>, <code>attack</code>, and <code>speed</code> to it one
by one.</p>
<hr />
<p><strong>Step 2: The Naming Ceremony</strong></p>
<p>Let‚Äôs start building our card.</p>
<ol type="1">
<li>Inside your function, create the empty <code>new_card</code>
table.</li>
<li>Create two lists: one with adjectives, one with nouns.</li>
<li>Use the <code>math.random</code> pattern to pick one word from each
list and combine them.</li>
<li>Add the new name to your table using
<code>new_card.name = ...</code>.</li>
</ol>
<blockquote>
<p><strong>A Quick Detour: Nested vs.¬†Step-by-Step</strong></p>
<p><strong>The Step-by-Step Way (easier to read):</strong></p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">total_adjectives</span> <span class="op">=</span> <span class="op">#</span><span class="va">adjectives</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">random_index</span> <span class="op">=</span> <span class="fu">math.random</span><span class="op">(</span><span class="va">total_adjectives</span><span class="op">)</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">random_adjective</span> <span class="op">=</span> <span class="va">adjectives</span><span class="op">[</span><span class="va">random_index</span><span class="op">]</span></span></code></pre></div>
<p><strong>The Nested Way (a compact shortcut):</strong></p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">random_adjective</span> <span class="op">=</span> <span class="va">adjectives</span><span class="op">[</span><span class="fu">math.random</span><span class="op">(#</span><span class="va">adjectives</span><span class="op">)]</span></span></code></pre></div>
<p>Both ways work the same! You can choose whichever makes more sense to
you.</p>
</blockquote>
<hr />
<p><strong>Step 3: The Balancing Act</strong></p>
<p>Now for the stats. We‚Äôll use our new <code>repeat...until</code> loop
to make sure they are balanced.</p>
<ol type="1">
<li>Inside your function, declare local variables for <code>life</code>,
<code>attack</code>, and <code>speed</code>.</li>
<li>Create a <code>repeat...until</code> loop.</li>
<li>Inside the loop, generate a random number for <code>life</code>,
<code>attack</code>, and <code>speed</code>. Let‚Äôs say between 1 and 10
for each.</li>
<li>The <code>until</code> condition should check if the sum of the
stats is less than or equal to your maximum (e.g., 20).</li>
<li>After the loop finishes, you are guaranteed to have balanced stats.
Add them to the <code>new_card</code> table.</li>
</ol>
<!-- end list -->
<div class="sourceCode" id="cb27"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- This part goes inside your generate_random_card function</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">life</span><span class="op">,</span> <span class="va">attack</span><span class="op">,</span> <span class="va">speed</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">max_stats</span> <span class="op">=</span> <span class="dv">20</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="cf">repeat</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="va">life</span> <span class="op">=</span> <span class="fu">math.random</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">10</span><span class="op">)</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="va">attack</span> <span class="op">=</span> <span class="fu">math.random</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">10</span><span class="op">)</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="va">speed</span> <span class="op">=</span> <span class="fu">math.random</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">8</span><span class="op">)</span> <span class="co">-- Maybe speed is rarer</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="cf">until</span> <span class="va">life</span> <span class="op">+</span> <span class="va">attack</span> <span class="op">+</span> <span class="va">speed</span> <span class="op">&lt;=</span> <span class="va">max_stats</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="va">new_card</span><span class="op">.</span><span class="va">life</span> <span class="op">=</span> <span class="va">life</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="va">new_card</span><span class="op">.</span><span class="va">attack</span> <span class="op">=</span> <span class="va">attack</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="va">new_card</span><span class="op">.</span><span class="va">speed</span> <span class="op">=</span> <span class="va">speed</span></span></code></pre></div>
<hr />
<p><strong>Step 4: The Final Product</strong></p>
<p>At the very end of your function, after you‚Äôve added the name and all
the stats, make sure you return the finished product.</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> generate_random_card<span class="op">()</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">local</span> <span class="va">new_card</span> <span class="op">=</span> <span class="op">{}</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- ... all the name and stat generation code goes here ...</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">new_card</span> <span class="co">-- Send the finished card out!</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>
<p>Now, use your completed function to forge a whole deck!</p>
<ol type="1">
<li>Create an empty table for your new deck:
<code>local random_deck = {}</code>.</li>
<li>Write a numeric <code>for</code> loop that runs, say, 12 times.</li>
<li>Inside the loop, call <code>generate_random_card()</code> and add
the returned card to your <code>random_deck</code>.</li>
<li>Use your <code>display_card()</code> function from the last unit to
print out your brand-new, completely unique deck!</li>
</ol>
<h3 data-number="6.5" id="the-troubleshooting-scroll-3"><span
class="header-section-number">6.5</span> <strong>The Troubleshooting
Scroll</strong></h3>
<ul>
<li><strong>My program freezes and never finishes!</strong>
<ul>
<li><strong>Meaning:</strong> You probably have an <strong>infinite
loop</strong>. Your <code>repeat...until</code> loop‚Äôs condition is
never becoming true.</li>
<li><strong>Check:</strong> Is your rule possible to achieve? If you
generate stats from 10-20, their sum can <em>never</em> be less than 20.
Make sure your <code>max_stats</code> value is high enough for the
random numbers you are generating!</li>
</ul></li>
<li><strong>Error:
<code>bad argument #2 to 'random' (interval is empty)</code></strong>
<ul>
<li><strong>Meaning:</strong> You tried to do
<code>math.random(min, max)</code> where <code>min</code> is larger than
<code>max</code>.</li>
<li><strong>Check:</strong> Make sure the first number in
<code>math.random(min, max)</code> is always smaller than or equal to
the second.</li>
</ul></li>
</ul>
<h2 data-number="7" id="the-first-clash"><span
class="header-section-number">7</span> <strong>The First Clash!
‚öîÔ∏è</strong></h2>
<hr />
<h3 data-number="7.1" id="the-story-so-far-5"><span
class="header-section-number">7.1</span> <strong>The Story So
Far‚Ä¶</strong></h3>
<p>You are a true creator! You‚Äôve built a Card Forge that can generate
endless unique creatures and functions that can analyze them in an
instant. All the pieces are on the workshop table. Now, it‚Äôs time to put
them together and spark them to life. It‚Äôs time to make two creatures
meet on the battlefield.</p>
<h3 data-number="7.2"
id="the-mission-what-well-accomplish-today-6"><span
class="header-section-number">7.2</span> <strong>The Mission: What We‚Äôll
Accomplish Today</strong></h3>
<p>Today, we will create the first interactive moment of your game. We
will write a script that sets up a small skirmish, determines who
attacks first, and allows a single, dramatic attack to take place, with
the player making the choice if it‚Äôs their turn.</p>
<h3 data-number="7.3" id="the-spellbook-new-tools-well-learn-6"><span
class="header-section-number">7.3</span> <strong>The Spellbook: New
Tools We‚Äôll Learn</strong></h3>
<p><strong>1. Booleans: <code>true</code> and <code>false</code> (The
Light Switch)</strong></p>
<p>So far, we‚Äôve used two types of data: <code>numbers</code> (like 10)
and <code>strings</code> (like ‚ÄúHello‚Äù). It‚Äôs time to learn the third
major type: the <strong>boolean</strong>.</p>
<p>A boolean is super simple. It can only ever have one of two values:
<strong><code>true</code></strong> or
<strong><code>false</code></strong>. That‚Äôs it.</p>
<p><strong>Analogy:</strong> Think of a light switch. It can only be on
or off. Booleans are perfect for tracking simple states or the answers
to yes/no questions. Is the game over? <code>false</code>. Is the player
hidden? <code>true</code>.</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">is_game_over</span> <span class="op">=</span> <span class="kw">false</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">player_has_key</span> <span class="op">=</span> <span class="kw">true</span></span></code></pre></div>
<p><strong>2. Conditionals: <code>if/then/else</code> (Making
Decisions)</strong></p>
<p>An <strong><code>if</code> statement</strong> is how you use booleans
to make your program smart. It checks if a condition is
<code>true</code>, and if it is, it runs a block of code.</p>
<p>The ‚Äúcondition‚Äù part of an <code>if</code> statement always results
in a boolean. For example, <code>player_level &gt; 10</code> becomes
<code>true</code> if <code>player_level</code> is 12.</p>
<div class="sourceCode" id="cb30"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- We can use a boolean variable directly</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">player_has_key</span> <span class="op">==</span> <span class="kw">true</span> <span class="cf">then</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span><span class="op">(</span><span class="st">&quot;You unlock the door.&quot;</span><span class="op">)</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span><span class="op">(</span><span class="st">&quot;The door is locked.&quot;</span><span class="op">)</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code></pre></div>
<p><strong>3. User Input: <code>io.read()</code> (Listening to the
Player)</strong></p>
<p>This function makes your program pause and wait for the player to
type something and press Enter.</p>
<p><strong>Important:</strong> <code>io.read()</code> always gives you
back a <code>string</code>. If you need a number, you have to convert it
using <code>tonumber()</code>.</p>
<div class="sourceCode" id="cb31"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span><span class="op">(</span><span class="st">&quot;Choose a spell (1=Fireball, 2=Ice Lance):&quot;</span><span class="op">)</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">choice_text</span> <span class="op">=</span> <span class="fu">io.read</span><span class="op">()</span> <span class="co">-- Player types &quot;1&quot;</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">choice_number</span> <span class="op">=</span> <span class="fu">tonumber</span><span class="op">(</span><span class="va">choice_text</span><span class="op">)</span> <span class="co">-- Convert the &quot;1&quot; string to the number 1</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">choice_number</span> <span class="op">==</span> <span class="dv">1</span> <span class="cf">then</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span><span class="op">(</span><span class="st">&quot;You cast Fireball!&quot;</span><span class="op">)</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code></pre></div>
<h3 data-number="7.4" id="your-quest-the-first-clash"><span
class="header-section-number">7.4</span> <strong>Your Quest: The First
Clash!</strong></h3>
<p>We‚Äôll build this in a single script (<code>main.lua</code>)
step-by-step.</p>
<p><strong>Step 1: Setting the Stage</strong></p>
<ol type="1">
<li>Make sure your <code>generate_random_card()</code> and other
functions are ready.</li>
<li>Create two empty tables: <code>player_hand</code> and
<code>computer_hand</code>.</li>
<li>Use a <code>for</code> loop to generate three random cards for the
<code>player_hand</code> and three for the
<code>computer_hand</code>.</li>
<li>Use your <code>display_card()</code> function to show the player
both hands.</li>
</ol>
<p><strong>Step 2: The Initiative</strong></p>
<ol type="1">
<li>Create a single <code>battlefield</code> table and add all 6 cards
into it.</li>
<li>Use your <code>find_fastest_card()</code> function on the
<code>battlefield</code> to find the <code>attacker</code> card.</li>
<li>Announce who is attacking:
<code>print(attacker.name .. " has the highest speed and attacks first!")</code>.</li>
</ol>
<p><strong>Step 3: Whose Turn Is It?</strong> Now we‚Äôll use a boolean to
track whose turn it is.</p>
<ol type="1">
<li>Create a variable <code>is_player_turn = false</code>. This is our
light switch, and we‚Äôll start with it ‚Äúoff‚Äù.</li>
<li>Use a <code>for</code> loop to go through the
<code>player_hand</code>. Inside the loop, use an <code>if</code>
statement to check if the current card is the same as the
<code>attacker</code>. If it is, flip our switch to on: set
<code>is_player_turn = true</code>.</li>
</ol>
<p><strong>Step 4: The Attack!</strong> This is where we use our big
<code>if/then/else</code> brain to check our boolean ‚Äúswitch‚Äù.</p>
<ol type="1">
<li>Write an
<code>if is_player_turn == true then ... else ... end</code> block.</li>
<li><strong>Inside the <code>if</code> block (Player‚Äôs Turn):</strong>
<ul>
<li>Print the computer‚Äôs cards as a numbered list of targets.</li>
<li>Prompt the player to choose a target.</li>
<li>Use <code>io.read()</code> and <code>tonumber()</code> to get their
choice.</li>
<li>Set a <code>target</code> variable to the chosen card from the
<code>computer_hand</code>.</li>
</ul></li>
<li><strong>Inside the <code>else</code> block (Computer‚Äôs
Turn):</strong>
<ul>
<li>Use <code>math.random(3)</code> to pick a random target index.</li>
<li>Set the <code>target</code> variable to the card from the
<code>player_hand</code> at that index.</li>
<li>Announce who the computer chose to attack.</li>
</ul></li>
</ol>
<p><strong>Step 5: The Aftermath</strong> This code goes <em>after</em>
the <code>if/then/else</code> block.</p>
<ol type="1">
<li>Calculate the new life:
<code>target.life = target.life - attacker.attack</code>.</li>
<li>Print the action:
<code>print(attacker.name .. " attacks " .. target.name .. ", dealing " .. attacker.attack .. " damage!")</code></li>
<li>Use a final <code>if</code> statement to check if
<code>target.life &lt;= 0</code>. If so, print that the card was
defeated. Otherwise, print its remaining life.</li>
</ol>
<p>And‚Ä¶ scene! You‚Äôve just created a fully interactive battle
sequence.</p>
<h3 data-number="7.5" id="the-troubleshooting-scroll-4"><span
class="header-section-number">7.5</span> <strong>The Troubleshooting
Scroll</strong></h3>
<ul>
<li><strong>Error: <code>attempt to compare number with nil</code> in my
<code>if</code> statement.</strong>
<ul>
<li><strong>Meaning:</strong> This often happens after asking for user
input. If the player types ‚Äúone‚Äù instead of ‚Äú1‚Äù,
<code>tonumber("one")</code> results in <code>nil</code> (nothing). You
can‚Äôt compare a number to nothing.</li>
<li><strong>Check:</strong> For now, just be careful to type a real
number.</li>
</ul></li>
<li><strong>The program crashes if I enter a number like 4 or 0 for my
target.</strong>
<ul>
<li><strong>Meaning:</strong> You‚Äôre trying to get
<code>computer_hand[4]</code>, but there‚Äôs nothing there, so you get
<code>nil</code>.</li>
<li><strong>Check:</strong> Your code is working correctly! The player
gave an invalid index. For now, just be sure to choose 1, 2, or 3.</li>
</ul></li>
</ul>
<h2 data-number="8" id="the-grand-melee"><span
class="header-section-number">8</span> <strong>The Grand Melee
üí•</strong></h2>
<hr />
<h3 data-number="8.1" id="the-story-so-far-6"><span
class="header-section-number">8.1</span> <strong>The Story So
Far‚Ä¶</strong></h3>
<p>You created an epic ‚ÄúFirst Clash‚Äù in the last unit! It was the first
time your game felt truly interactive. But that single attack was just
the opening move. A real battle is a chaotic melee where every creature
gets a turn. As we‚Äôll see, making this happen introduces some tricky new
challenges that will require some clever new tactics to solve.</p>
<h3 data-number="8.2"
id="the-mission-what-well-accomplish-today-7"><span
class="header-section-number">8.2</span> <strong>The Mission: What We‚Äôll
Accomplish Today</strong></h3>
<p>Our mission is to implement a full battle round where all 6 cards on
the table get to act. The program will: 1. Create two 3-card hands for
the player and computer. 2. Intelligently determine the correct turn
order, one turn at a time. 3. Allow each living card to attack a living
opponent. 4. Print the final status of all cards after the battle is
over.</p>
<hr />
<h3 data-number="8.3" id="the-new-challenge-who-attacks-next"><span
class="header-section-number">8.3</span> <strong>1. The New Challenge:
Who Attacks Next?</strong></h3>
<p>Our old ‚Äúfind the single fastest card‚Äù logic is broken now. Why?
Because in a full round: 1. A card that is defeated before its turn
can‚Äôt attack at all. 2. Once a card takes its turn, it can‚Äôt attack
again in the same round.</p>
<p>Simply finding the fastest card over and over won‚Äôt work. We might
pick the same card twice, or pick a card that‚Äôs already been defeated.
We need a smarter way to track the state of the whole battlefield.</p>
<h4 data-number="8.3.1" id="our-new-tactic-the-battlefield-list"><span
class="header-section-number">8.3.1</span> <strong>Our New Tactic: The
Battlefield List</strong></h4>
<p>To solve this, we‚Äôll create <strong>one single list</strong> of all 6
cards on the battlefield. To avoid losing track of who owns each card,
our list will hold small ‚Äúturn marker‚Äù tables.</p>
<p>It‚Äôs worth noting that this tactic isn‚Äôt exactly how a human would do
it. You‚Äôd just look at the table and intuitively know who‚Äôs left and who
is fastest. But a computer doesn‚Äôt have intuition; it has a very narrow
focus. We need to give it a very precise recipe (an
<strong>algorithm</strong>) to follow so that it never misses a card or
makes the wrong choice. This list is the first step in that recipe.</p>
<p>The structure for each item in our new list will be a table like
this:
<code>{ card = { ... }, owner = "player", has_attacked = false }</code></p>
<p>The <code>has_attacked = false</code> is a new
<strong>boolean</strong> flag‚Äîour ‚Äúlight switch‚Äù for tracking who has
already had their turn this round.</p>
<hr />
<h3 data-number="8.4"
id="the-targeting-problem-who-can-be-attacked"><span
class="header-section-number">8.4</span> <strong>2. The Targeting
Problem: Who Can Be Attacked?</strong></h3>
<p>The second big challenge is that an attacker can‚Äôt target a card that
has already been defeated. The opponent‚Äôs hand might have 3 card slots,
but only one or two might be valid, living targets.</p>
<h4 data-number="8.4.1"
id="our-new-tactic-filtering-for-valid-targets"><span
class="header-section-number">8.4.1</span> <strong>Our New Tactic:
Filtering for Valid Targets</strong></h4>
<p>This is the perfect place to use a technique called
<strong>filtering</strong>. Filtering is the simple idea of building a
new, temporary list from an old one, but only including the items that
match a specific rule.</p>
<p>We‚Äôll look at the opponent‚Äôs entire hand of 3 cards and build a
<em>new, shorter list</em> that contains only the cards that are still
standing (their <code>life</code> is greater than 0). This new list
becomes our list of valid targets for that specific turn.</p>
<p>Remember our ‚Äúlist of shortcuts‚Äù concept: this new
<code>valid_targets</code> list doesn‚Äôt contain <em>copies</em> of the
cards; it contains shortcuts to the originals. Damaging a card from this
new list will damage the card in the opponent‚Äôs actual hand.</p>
<hr />
<h3 data-number="8.5" id="your-quest-the-grand-melee"><span
class="header-section-number">8.5</span> <strong>Your Quest: The Grand
Melee</strong></h3>
<p><strong>Step 1: Setup</strong> 1. Generate the
<code>player_hand</code> and <code>computer_hand</code> with 3 random
cards each. 2. Display the starting cards so the player knows the
battlefield.</p>
<p><strong>Step 2: Create the Battlefield List</strong> 1. Create an
empty table: <code>local battlefield = {}</code>. 2. Use a
<code>for</code> loop to go through the <code>player_hand</code>. For
each card, <code>table.insert</code> a new table
<code>{ card = the_card, owner = "player", has_attacked = false }</code>
into your <code>battlefield</code> list. 3. Do the same for the
<code>computer_hand</code>, using <code>owner = "computer"</code>.</p>
<p><strong>Step 3: The Main Loop</strong> We need a loop that will run
for each of the 6 ‚Äúturn slots‚Äù in the round. A simple numeric
<code>for</code> loop is perfect for this.
<code>for turn_number = 1, 6 do ... end</code></p>
<p><strong>Inside the Loop (For Each Turn):</strong></p>
<p><strong>A. Find the Next Attacker</strong> * This is our core
algorithm for the turn. We need to search the entire
<code>battlefield</code> to find the best possible attacker right now. *
Create two variables before the search:
<code>local next_attacker_info = nil</code> and
<code>local highest_speed = -1</code>. * Now, loop through the
<code>battlefield</code> list
(<code>for i, info in ipairs(battlefield) do...</code>). Inside this
search loop, use an <code>if</code> statement with three conditions:
<code>if info.card.life &gt; 0 and info.has_attacked == false and info.card.speed &gt; highest_speed then ...</code>
* If all three are true, you‚Äôve found a new best attacker for this turn!
Update your variables: <code>highest_speed = info.card.speed</code> and
<code>next_attacker_info = info</code>. * After this search loop
finishes, <code>next_attacker_info</code> will hold the correct card to
attack this turn.</p>
<p><strong>B. The Attack Sequence (If an attacker was found)</strong> *
Use an <code>if</code> statement to check if an attacker was actually
found: <code>if next_attacker_info then ... end</code>. *
<strong>Determine Targets:</strong> Figure out which hand is the
enemy‚Äôs. * <strong>Filter Targets:</strong> Build the
<code>valid_targets</code> list by looping through the opponent‚Äôs hand
and grabbing only the living cards. * <strong>Perform the
Attack:</strong> Check if there are any valid targets. If so, let the
player or computer choose a target and perform the attack calculation. *
<strong>Update State:</strong> This is critical! After the attack, mark
the attacker‚Äôs turn as complete so they can‚Äôt be chosen again:
<code>next_attacker_info.has_attacked = true</code>.</p>
<p><strong>Step 4: The Aftermath</strong> 1. After the main
<code>for turn_number = 1, 6 do</code> loop is finished, print a ‚Äú‚Äî
Round Over ‚Äî‚Äù message. 2. Loop through the original
<code>player_hand</code> and <code>computer_hand</code> and display the
final status of all 6 cards.</p>
<h3 data-number="8.6" id="the-troubleshooting-scroll-5"><span
class="header-section-number">8.6</span> <strong>The Troubleshooting
Scroll</strong></h3>
<ul>
<li><strong>The same card attacks over and over!</strong>
<ul>
<li><strong>Check:</strong> You are likely forgetting to update the
attacker‚Äôs state after they attack. Make sure the line
<code>next_attacker_info.has_attacked = true</code> is running
correctly.</li>
</ul></li>
<li><strong>The program crashes trying to attack.</strong>
<ul>
<li><strong>Check:</strong> Are you checking if there are any
<code>valid_targets</code> before trying to attack? If all opponents are
defeated, your <code>valid_targets</code> list will be empty, and trying
to pick a target (<code>valid_targets[1]</code>) will result in
<code>nil</code>. Make sure your attack logic is inside an
<code>if #valid_targets &gt; 0 then ...</code> block.</li>
</ul></li>
</ul>
</body>
</html>
